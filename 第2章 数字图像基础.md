##### 人类视觉

- 物体是在视网膜成象，视网膜上的光感细胞是视锥细胞，约 256000个视锥细胞，即约256000个光感受单元。可以理解为像素为 256000 
  
  > 电子成象，的像素远远超过这个数字。
  > 
  > 人类的特点是：智能+经验+光感成象。图像理解效果更好

##### 亮度调节

- 实验证明，人类感知光的强度，是光强度的对数函数

- 虽然人类感知光的强度的范围很大，但是是通过调节光感状态达到的。即，在任何一个状态下，人能关注的光的强度是较小范围。通过移动状态，调节注意的强度范围，达到整体更大的强度范围
  
  > 关注的强度范围中，强度低于下限，都视为黑色，高于上限，则将强度范围自动向上拉动
  > 
  > 类似于，某一状态下，能看清的距离范围是小范围，而通过调节晶状体，可看到不同距离的附近的东西

- 在低光照时，视觉由视杆(rod) 主导，在高光照时，视觉由视锥细胞(cone)决定

- 感受光强，并不是实际光强的简单函数
  
  > Mach 带效果，同一光强区域，靠近低光强一侧，感受光强更高；靠近高光强一侧，感受光强更低

- 人类视觉有光学错觉
  
  > 应该是经验补充，导致的错觉。 // 个人理解 

##### 光和电磁频谱

- 电磁波，可以理解为一束无质量的粒子，以光速，如波浪模式移动。

- 电磁波的每一个无质量的粒子，都携带一定能力，这个能量被称为光子
  
  > 光子是一个能量单元
  > 
  > 能量大小，正比于电磁波的频率 e = hv。其中 e 是能量，v 是频率，h 是普朗克常数
  > 
  > 无线电波，radio wave，频率最低，能量最小。X射线，甚至 gamma 射线，频率最高，能量最大。x射线，gamma 射线，对生物有害

- 光，是指可被眼睛感受到的电磁波段，相对很窄的一段电磁波

- 物体的颜色，是指物体反射的波段。
  
  > 例如，绿色植物，只反射 500~570 nm(绿色对应的电磁波段)，其他波段的电磁波都吸收掉，故眼睛接受到的只有绿色段，也就是感受到植物是绿色的。

- 不考虑颜色，只考虑强度的光，称为单色光。一般用会灰度图像表示，只有黑，灰，白色系。

- 彩色光，可以描述的维度
  
  > 辐射度, radiance, 即发射的光的能量大小
  > 
  > 接受的光强度，luminance, 即客观上接受的光强度。
  > 
  > - 例如人眼无法接受红外线，则 luminance 值为0
  > 
  > 感知的光强度，brightness, 即主观上感受的光强度。
  > 
  > - 实际上无法精确度量

- 用电磁波探测物体形状时，即成象，波长需要小于等于物体对象
  
  > 例如 水分子直径 10^10 米，则需要 x射线级别的短波的电磁波，才能探测

##### 图像传感和采集

- 能量---[感光材料]-->电压 ---[数字化]---> 数字图像

- 图像传感器
  
  - 单个感受元
    
    > 通过左右，上下移动，形成2d 图像。
  
  - 1维感受条
    
    > 例如，打印机，一次对应一行
    > 
    > 例如，医疗成象中，环形条状感受条 + 2维度移动 -> 3D 模型
    > 
    > CT 通过 x射线源环形移动 + 人体垂直环形移动，得到横截面图的集合，可重建出 3d 模型。
    > 
    > 磁共振成象(MRI), PET 都类似
  
  - 2维感受区
    
    > 是电磁波和超声波成象的主要布置方式。
    > 
    > 例如相机的 ccd 芯片，就是 2d 阵列。可达 4000*4000
    > 
    > 最大的好处，不需要移动，就可以 2d成象

##### 图片采样和量化

> 从传感器数据，生成数字图像：采样+量化

- 图像函数 f(x,y) 包含坐标值 x,y , 和强度值 f(x, y)
  
  > 坐标值和强度值都是连续值
  > 
  > 对坐标值数字化（离散化），称为采样。即对**空间**位置数字化
  > 
  > 对强度值数字化，称为量化。即对光强**信息**的数字化

- 最常见的强度的表示位数，是 8 bits

- 在数字图像的平滑区域，使用低级别范围的强度值表示，会生成额外的轮廓效果，成为假轮廓，false contouring.

- 图片包含大量更大空间内容时，每个像素需要的强度范围更小，对于强度范围变小更不敏感。

- 图像差值
  
  > 当图像放大，缩小，旋转等操作时，需要对未知的进行插值
  
  - 最邻接差值
    
    > 例如 放大 500x500 -> 750x570
    > 
    > 将大尺寸的图像的边界和小尺寸对齐，在新尺寸中的每个格子，找对应最近的旧尺寸的格子，进行赋值。
  
  - 双线性插值, bilinear interprolation
    
    - 线性插值
      
      > 输入：两个点的值 f1, f2
      > 
      > 输入：两个点决定的直线线段上的点的 f 
      > 
      > 方法：将直线上的 f 的变化，视为线性变化即可。
    
    - 双线性插值
      
      > 输入：四个点的坐标和值
      > 
      > 输入：四个点的矩形空间内，指定点的值 f
      > 
      > 方法：在 2D 空间上，先对一个维度做线性插值，再对另一个维度，做线性插值。
    
    - 多项式拟合法
      
      > 使用多项式的函数，拟合双线性插值
      > 
      > $v(x, y) = ax + by + cxy + d$ 
      > 
      > 将输入的四个点的坐标和值，代入方程，解出未知数 a,b,c,d。对于新点(x, y)，可得到插值 v(x, y)
  
  - 双三次方插值，bicubic interpolation
    
    > 最近4x4 个点 + 3次方模型 -> 插值
    
    > $$
    > v(x,y) = \sum_{i=0}^{3}\sum_{j=0}^{3}a_{ij}x^iy^j
    > $$
  
  > 效果上：最邻接插值 < 双线性插值 < 双三次方插值
  > 
  > 计算量，依次增加。
  > 
  > 最邻接插值，噪音明显。
  > 
  > 双线性插值，噪音消失，但是模糊
  > 
  > 双三次插值，噪音消失，轮廓分明。效果最佳

##### 像素位置关系

- m-邻接, m-adjacency，即混合邻接
  
  > 个人理解：m-邻接，与路径相关：所有4-邻接点+中心点和对角点之间没有4-邻接点的情况。 

- 边界，一般指区域外轮廓边界。
  
  > 外轮廓边界才能保证边界是一条封闭路径
  > 
  > 例如区域是一条直线时，只有外轮廓是封闭路径，内轮廓不是。

- 边界 vs 边缘
  
  - 边界：指一个闭合路径
  
  - 边缘：指强度值不连续的位置集合

## 数学基础

##### 基础概念

- 线性操作
  
  > 满足加性 + 齐次性的函数，就是线性操作
  > 
  > 加性：f(x + y) = f(x) + f(y)
  > 
  >  齐次：f(ax) = af(x)
  
  >  例如，加法，是线性操作。 max 是非线性操作

- 图片多次采样再取平均，可以降噪
  
  > g(x, y) = f(x, y) + n(x, y)
  > 
  > 其中 E[n(x, y)] = 0
  > 
  > 所以，采样多次 g(x, y), 取平均值，即可消去噪声 n(x, y)
  > 
  > 即，E(g(x, y)) = f(x, y) + 0

- 图像的集合操作
  
  - 注意：并操作, Union ,是保留两个图像中同一个像素位置的最大值。不是对比特按位并

- 有序集合，严格有序集合
  
  > 有序集合，如 <= 关系的集合
  > 
  > 严格集合，如 < 关系的集合

##### 几何变换

> 两个基本操作：坐标的空间变化 + 变换后的位置做强度插值

- 仿射变换，affine transformation
  
  > $(x', y') = A(x, y)$
  > 
  > 仿射变换特点：保留点，直线，平面
  
  - 图像旋转
    
    > $$
    > \begin{bmatrix}
x'\\
y'
\end{bmatrix}
= 
\begin{bmatrix}
xcos\theta - y sin\theta \\
xsin\theta + y cos\theta
\end{bmatrix}
=
\begin{bmatrix}
cos\theta& -sin\theta \\
sin\theta& cos\theta
\end{bmatrix}
\begin{bmatrix}
x\\
y
\end{bmatrix}
    > $$
    > 
    >  x, y 视为原来点所在的方向 $\alpha$ 的 cosine, sine的值
    > 
    > 则旋转后 x', y' 是旋转后方向 $(\alpha + \theta)$ 的 cosine, sine 值
    > 
    > 乘以长度系数，则可得任意点的旋转后的位置。

- `仿射变换`有两种方法
  
  - 前向映射： (x, y) 的计算新坐标 (x', y')，插值
    
    > 问题一：多个格子，映射到同一个新格子
    > 
    > 问题二：新格子，无旧格子的映射
  
  - 逆映射：$ (x, y)=A^{-1}(x', y')$
    
    > 逆映射，更高效

##### 向量，矩阵操作

- RGB 图像，可以表示为1/ M \* N 尺寸的3 张图；2/ M \* N 个维度为3的向量。每个向量的3个值，表示 RGB 三个值。

##### 图像配准，Image Registration

>  将同一个场景的多张图像，做对齐
> 
> 通常多张图像之间的变换函数，是未知的，需要估计。

##### 概率

- 贝叶斯法则 = **条件概率 + 全概率公式**
  
  - 条件概率
    
    $$
    P(A|B) = \frac{P(A\bigcap B)}{P(B)}
    $$

- 全概率公式
  
  $$
  P(A)= \displaystyle\sum_{i=1}^{n} P(A\bigcap B_{i})
  $$

- 贝叶斯法则
  
  $$
  \therefore P(B_{k}|A) = \frac {P(AB_{k})}{P(A)} 
= \frac{P(A|B_{k})P(B_{k})}{\displaystyle\sum_{i=1}^{n}P(A|B_{i})P(B_{i})} 
  $$

- 当**只有一个 B, 即 k = 1** 时，有
  
  $$
  P(B|A) = \frac {P(A|B)P(B)}{P(A|B)P(B) + P(A|B^c)P(B^c)}
  $$
  
  此为贝叶斯公式。

- 全概率公式，本质上就是 **分情况讨论**
  
  > 树状分支法，有利于分情况讨论+理解
  > 
  > 全概率公式，有利于公式推导

##### 随机变量

> 随机变量，是一个函数：随机试验的结果 -> 实数

- 一阶**原生矩**，就是随机变量的期望

- 二阶**中心矩**，就是随机变量的方差

- 三阶中心矩，即偏斜度，skewness,用于度量不对称程度，即偏斜程度
  
  > 对于单峰的分布，负偏度，表示定义域大部分在均值左侧。
  > 
  > 正偏度，表示定义域大部分在均值右侧。
  > 
  > 0 偏度，表示定义域在均值左右两侧比较均匀。
  > 
  > 故，完全对称的分布，其三阶中心距为0

- 对于图像，方差和强度平方成正比，标准差和强度成正比。

- 高斯分布，其累积密度函数，cdf ， 没有解析表达式

> 通过样本，可以评估三阶矩，四阶矩。还没完全看懂，有需要再研究。 zyp. 

##### 多维随机变量

> 一个常用常见：RGB 三个通道，分别视为三个随机变量，组合再一起视为维度为3的多维随机变量

- 多维随机变量，就是将样本空间，映射到多维空间，用多维向量表示

- 多元高斯分布，由均值向量 + 协方差矩阵，完全确定
  
  > 一元高斯分布，由均值 + 方差，完全确定
